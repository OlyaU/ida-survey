<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>–ò–î–ê ‚Äî –û–ø—Ä–æ—Å —Ä—ã–Ω–∫–∞ —Å–∫–ª–∞–¥—Å–∫–æ–π –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç–∏</title>
<link href="https://fonts.googleapis.com/css2?family=Manrope:wght@300;400;500;600;700;800&family=Spectral:ital,wght@0,400;0,600;1,400&display=swap" rel="stylesheet">
<style>
  :root {
    --navy:   #1a2f5e;
    --blue:   #2451a3;
    --blue2:  #3968c8;
    --teal:   #0a7c6e;
    --teal2:  #0d9688;
    --red:    #c0392b;
    --gold:   #d4a017;
    --bg:     #f0f2f7;
    --card:   #ffffff;
    --border: #d8dce8;
    --text:   #1c2340;
    --muted:  #6b738a;
    --light:  #e8ecf5;
    --green:  #1b7a4a;
    --orange: #c96b1a;
  }

  *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

  body {
    font-family: 'Manrope', sans-serif;
    background: var(--bg);
    color: var(--text);
    min-height: 100vh;
    overflow-x: hidden;
  }
  body.on-hero {
    background: linear-gradient(135deg, var(--navy) 0%, #0f1e40 50%, #1a3a6e 100%);
  }

  /* ‚îÄ‚îÄ Hero ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */
  .hero {
    background: linear-gradient(135deg, var(--navy) 0%, #0f1e40 50%, #1a3a6e 100%);
    color: white;
    padding: 0;
    position: relative;
    overflow: hidden;
  }
  .hero::before {
    content: '';
    position: absolute; inset: 0;
    pointer-events: none;
    background:
      radial-gradient(ellipse 60% 80% at 90% 50%, rgba(36,81,163,0.35) 0%, transparent 70%),
      radial-gradient(ellipse 40% 60% at 10% 80%, rgba(10,124,110,0.2) 0%, transparent 60%);
  }
  .hero-grid {
    display: grid;
    grid-template-columns: 1fr 360px;
    gap: 0;
    max-width: 1100px;
    margin: 0 auto;
    position: relative;
    z-index: 1;
  }
  .hero-left {
    padding: 56px 48px 56px 32px;
    border-right: 1px solid rgba(255,255,255,0.1);
  }
  .hero-badge {
    display: inline-flex;
    align-items: center;
    gap: 8px;
    background: rgba(255,255,255,0.1);
    border: 1px solid rgba(255,255,255,0.2);
    border-radius: 100px;
    padding: 6px 14px;
    font-size: 11px;
    font-weight: 700;
    letter-spacing: 0.08em;
    text-transform: uppercase;
    margin-bottom: 24px;
    color: rgba(255,255,255,0.85);
  }
  .hero-badge span { width: 6px; height: 6px; background: #4ade80; border-radius: 50%; animation: pulse 2s infinite; }
  @keyframes pulse { 0%,100%{opacity:1} 50%{opacity:0.4} }
  .hero h1 {
    font-family: 'Spectral', serif;
    font-size: 42px;
    font-weight: 600;
    line-height: 1.15;
    margin-bottom: 16px;
    letter-spacing: -0.02em;
  }
  .hero h1 em { font-style: italic; color: #a8c8ff; }
  .hero-desc {
    font-size: 15px;
    line-height: 1.7;
    color: rgba(255,255,255,0.7);
    max-width: 480px;
    margin-bottom: 32px;
  }
  .hero-stats {
    display: flex;
    gap: 32px;
  }
  .stat { }
  .stat-num {
    font-size: 28px;
    font-weight: 800;
    color: white;
    line-height: 1;
    margin-bottom: 4px;
  }
  .stat-label {
    font-size: 11px;
    color: rgba(255,255,255,0.5);
    text-transform: uppercase;
    letter-spacing: 0.06em;
  }
  .hero-right {
    padding: 40px 32px;
    display: flex;
    flex-direction: column;
    justify-content: center;
    gap: 16px;
    background: rgba(0,0,0,0.15);
  }
  .panel-card {
    background: rgba(255,255,255,0.08);
    border: 1px solid rgba(255,255,255,0.15);
    border-radius: 12px;
    padding: 18px 20px;
    cursor: pointer;
    transition: all 0.2s;
    position: relative;
    overflow: hidden;
  }
  .panel-card::before {
    content: '';
    position: absolute;
    left: 0; top: 0; bottom: 0;
    width: 3px;
    border-radius: 0 2px 2px 0;
  }
  .panel-card.dev::before { background: #60a5fa; }
  .panel-card.ten::before { background: #34d399; }
  .panel-card:hover {
    background: rgba(255,255,255,0.14);
    transform: translateX(3px);
  }
  .panel-card.active {
    background: rgba(255,255,255,0.16);
    border-color: rgba(255,255,255,0.3);
  }
  .pc-top {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    margin-bottom: 8px;
  }
  .pc-title {
    font-size: 13px;
    font-weight: 700;
    color: white;
  }
  .pc-count {
    font-size: 11px;
    font-weight: 600;
    color: rgba(255,255,255,0.5);
    background: rgba(255,255,255,0.1);
    padding: 2px 8px;
    border-radius: 100px;
  }
  .pc-desc {
    font-size: 11px;
    color: rgba(255,255,255,0.5);
    line-height: 1.5;
  }
  .pc-arrow {
    display: inline-block;
    margin-left: 4px;
    transition: transform 0.2s;
  }
  .panel-card:hover .pc-arrow { transform: translateX(3px); }

  /* ‚îÄ‚îÄ Progress bar ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */
  .progress-wrap {
    background: white;
    border-bottom: 1px solid var(--border);
    position: sticky;
    top: 0;
    z-index: 100;
    box-shadow: 0 2px 12px rgba(0,0,0,0.06);
  }
  .progress-inner {
    max-width: 1100px;
    margin: 0 auto;
    padding: 14px 32px;
    display: flex;
    align-items: center;
    gap: 20px;
  }
  .progress-label {
    font-size: 12px;
    font-weight: 700;
    color: var(--muted);
    white-space: nowrap;
    text-transform: uppercase;
    letter-spacing: 0.06em;
  }
  .progress-bar {
    flex: 1;
    height: 6px;
    background: var(--light);
    border-radius: 100px;
    overflow: hidden;
  }
  .progress-fill {
    height: 100%;
    background: linear-gradient(90deg, var(--blue), var(--blue2));
    border-radius: 100px;
    width: 0%;
    transition: width 0.4s ease;
  }
  .progress-pct {
    font-size: 13px;
    font-weight: 800;
    color: var(--blue);
    min-width: 36px;
    text-align: right;
  }

  /* ‚îÄ‚îÄ Main layout ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */
  .main {
    max-width: 1100px;
    margin: 0 auto;
    padding: 40px 32px 80px;
    display: grid;
    grid-template-columns: 220px 1fr;
    gap: 32px;
    align-items: start;
  }

  /* ‚îÄ‚îÄ Sidebar nav ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */
  .sidebar {
    position: sticky;
    top: 72px;
  }
  .sidebar-section {
    margin-bottom: 6px;
  }
  .sidebar-panel {
    font-size: 10px;
    font-weight: 800;
    text-transform: uppercase;
    letter-spacing: 0.1em;
    color: var(--muted);
    padding: 8px 12px 4px;
  }
  .nav-item {
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 8px 12px;
    border-radius: 8px;
    cursor: pointer;
    transition: all 0.15s;
    font-size: 12px;
    font-weight: 500;
    color: var(--muted);
    text-decoration: none;
  }
  .nav-item:hover { background: white; color: var(--text); }
  .nav-item.active { background: white; color: var(--navy); font-weight: 700; box-shadow: 0 1px 4px rgba(0,0,0,0.08); }
  .nav-dot {
    width: 20px; height: 20px;
    border-radius: 50%;
    display: flex; align-items: center; justify-content: center;
    font-size: 9px; font-weight: 800;
    flex-shrink: 0;
    border: 2px solid var(--border);
    color: var(--muted);
    transition: all 0.2s;
  }
  .nav-item.active .nav-dot {
    background: var(--blue);
    border-color: var(--blue);
    color: white;
  }
  .nav-item.done .nav-dot {
    background: var(--green);
    border-color: var(--green);
    color: white;
  }
  .nav-check { font-size: 9px; }

  /* ‚îÄ‚îÄ Sections ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */
  .section {
    display: none;
    animation: fadeIn 0.3s ease;
  }
  .section.visible { display: block; }
  @keyframes fadeIn { from{opacity:0;transform:translateY(8px)} to{opacity:1;transform:none} }

  .section-header {
    display: flex;
    align-items: flex-start;
    gap: 16px;
    margin-bottom: 28px;
    padding-bottom: 20px;
    border-bottom: 2px solid var(--light);
  }
  .section-icon {
    width: 44px; height: 44px;
    border-radius: 12px;
    display: flex; align-items: center; justify-content: center;
    font-size: 20px;
    flex-shrink: 0;
  }
  .icon-blue { background: #dbeafe; }
  .icon-navy { background: #dde4f5; }
  .icon-teal { background: #ccf2ee; }
  .icon-green { background: #dcfce7; }
  .icon-gold  { background: #fef3c7; }

  .section-title {
    font-size: 20px;
    font-weight: 800;
    color: var(--navy);
    line-height: 1.2;
    margin-bottom: 4px;
  }
  .section-sub {
    font-size: 12px;
    color: var(--muted);
    line-height: 1.5;
  }

  /* ‚îÄ‚îÄ Question cards ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */
  .questions { display: flex; flex-direction: column; gap: 14px; }

  .q-card {
    background: var(--card);
    border: 1.5px solid var(--border);
    border-radius: 14px;
    padding: 20px 22px;
    transition: border-color 0.2s, box-shadow 0.2s;
    position: relative;
  }
  .q-card:hover { border-color: #b0bde0; box-shadow: 0 2px 12px rgba(0,0,0,0.05); }
  .q-card.answered { border-color: #a3c4f3; background: #fafdff; }

  .q-top {
    display: flex;
    gap: 14px;
    align-items: flex-start;
    margin-bottom: 14px;
  }
  .q-num {
    width: 26px; height: 26px;
    border-radius: 8px;
    background: var(--light);
    color: var(--blue);
    font-size: 11px;
    font-weight: 800;
    display: flex; align-items: center; justify-content: center;
    flex-shrink: 0;
    margin-top: 1px;
  }
  .q-card.answered .q-num {
    background: var(--blue);
    color: white;
  }
  .q-text {
    font-size: 14px;
    font-weight: 600;
    color: var(--text);
    line-height: 1.5;
    flex: 1;
  }

  .q-tags { display: flex; gap: 6px; flex-wrap: wrap; margin-bottom: 14px; margin-left: 40px; }
  .tag {
    font-size: 10px;
    font-weight: 700;
    letter-spacing: 0.05em;
    text-transform: uppercase;
    padding: 3px 9px;
    border-radius: 100px;
  }
  .tag-key  { background: #dcfce7; color: #166534; }
  .tag-merged { background: #ffedd5; color: #9a3412; }

  /* ‚îÄ‚îÄ Radio options ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */
  .options {
    display: flex;
    gap: 8px;
    flex-wrap: wrap;
    margin-left: 40px;
  }
  .opt {
    flex: 1;
    min-width: 100px;
    position: relative;
  }
  .opt input { position: absolute; opacity: 0; width: 0; height: 0; }
  .opt label {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 6px;
    padding: 10px 14px;
    border: 1.5px solid var(--border);
    border-radius: 10px;
    cursor: pointer;
    font-size: 12px;
    font-weight: 600;
    color: var(--muted);
    background: var(--bg);
    transition: all 0.15s;
    text-align: center;
    line-height: 1.3;
    user-select: none;
  }
  .opt label:hover {
    border-color: var(--blue);
    color: var(--blue);
    background: #eff4ff;
  }
  .opt input:checked + label {
    border-color: var(--blue);
    background: var(--blue);
    color: white;
    box-shadow: 0 2px 8px rgba(36,81,163,0.25);
  }

  /* Teal variant for Block II */
  .teal-block .opt input:checked + label {
    border-color: var(--teal);
    background: var(--teal);
    box-shadow: 0 2px 8px rgba(10,124,110,0.25);
  }
  .teal-block .q-card.answered { border-color: #7fdacf; background: #f0faf9; }
  .teal-block .q-card.answered .q-num { background: var(--teal); }
  .teal-block .nav-item.active .nav-dot { background: var(--teal); border-color: var(--teal); }

  /* ‚îÄ‚îÄ Scale question (1-10) ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */
  .scale-card {
    background: linear-gradient(135deg, #fffbeb 0%, #fef9f0 100%);
    border: 2px solid #f59e0b;
    border-radius: 16px;
    padding: 24px 26px;
    margin-top: 8px;
  }
  .scale-top {
    display: flex; align-items: flex-start; gap: 14px; margin-bottom: 20px;
  }
  .scale-icon {
    width: 36px; height: 36px;
    background: #fef3c7;
    border-radius: 10px;
    display: flex; align-items: center; justify-content: center;
    font-size: 18px;
    flex-shrink: 0;
  }
  .scale-title {
    font-size: 14px; font-weight: 700; color: #92400e; line-height: 1.4;
  }
  .scale-sub {
    font-size: 12px; color: #b45309; margin-top: 4px; line-height: 1.4;
  }
  .scale-track {
    display: flex; gap: 6px; align-items: stretch; margin-bottom: 10px;
  }
  .scale-btn {
    flex: 1;
    height: 48px;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    font-size: 14px;
    font-weight: 800;
    color: white;
    transition: all 0.15s;
    position: relative;
    text-shadow: 0 1px 2px rgba(0,0,0,0.15);
  }
  .scale-btn:hover { transform: translateY(-2px); box-shadow: 0 4px 12px rgba(0,0,0,0.15); }
  .scale-btn.selected { transform: translateY(-4px); box-shadow: 0 6px 16px rgba(0,0,0,0.2); ring: 3px; }
  .scale-btn.selected::after {
    content: '‚ñ≤';
    position: absolute;
    bottom: -18px;
    left: 50%;
    transform: translateX(-50%);
    font-size: 10px;
    color: #92400e;
  }
  .scale-labels {
    display: flex; justify-content: space-between;
    font-size: 10px; color: #92400e; font-weight: 600;
    padding: 0 2px; margin-top: 8px;
  }

  /* ‚îÄ‚îÄ Open question ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */
  .open-card {
    background: var(--card);
    border: 1.5px dashed var(--border);
    border-radius: 14px;
    padding: 20px 22px;
    margin-top: 8px;
  }
  .open-label {
    display: flex; align-items: center; gap: 10px;
    font-size: 14px; font-weight: 600; color: var(--text);
    margin-bottom: 12px;
  }
  .open-icon {
    width: 28px; height: 28px;
    background: #f1f5ff;
    border-radius: 8px;
    display: flex; align-items: center; justify-content: center;
    font-size: 14px;
  }
  textarea {
    width: 100%;
    border: 1.5px solid var(--border);
    border-radius: 10px;
    padding: 12px 14px;
    font-family: 'Manrope', sans-serif;
    font-size: 13px;
    color: var(--text);
    background: var(--bg);
    resize: vertical;
    min-height: 80px;
    transition: border-color 0.2s;
    line-height: 1.5;
  }
  textarea:focus { outline: none; border-color: var(--blue); background: white; }
  .char-count { font-size: 11px; color: var(--muted); text-align: right; margin-top: 6px; }

  /* ‚îÄ‚îÄ Navigation buttons ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */
  .nav-btns {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-top: 28px;
    padding-top: 20px;
    border-top: 1px solid var(--light);
  }
  .btn {
    display: inline-flex; align-items: center; gap: 8px;
    padding: 11px 22px;
    border-radius: 10px;
    font-family: 'Manrope', sans-serif;
    font-size: 13px;
    font-weight: 700;
    cursor: pointer;
    transition: all 0.15s;
    border: none;
  }
  .btn-ghost {
    background: transparent;
    color: var(--muted);
    border: 1.5px solid var(--border);
  }
  .btn-ghost:hover { background: var(--light); color: var(--text); }
  .btn-primary {
    background: var(--blue);
    color: white;
    box-shadow: 0 2px 8px rgba(36,81,163,0.3);
  }
  .btn-primary:hover { background: var(--blue2); box-shadow: 0 4px 14px rgba(36,81,163,0.35); transform: translateY(-1px); }
  .btn-teal {
    background: var(--teal);
    color: white;
    box-shadow: 0 2px 8px rgba(10,124,110,0.3);
  }
  .btn-teal:hover { background: var(--teal2); transform: translateY(-1px); }
  .btn-success {
    background: var(--green);
    color: white;
    padding: 13px 28px;
    font-size: 14px;
    box-shadow: 0 3px 12px rgba(27,122,74,0.3);
  }
  .btn-success:hover { transform: translateY(-1px); box-shadow: 0 5px 18px rgba(27,122,74,0.35); }

  .section-counter {
    font-size: 12px; font-weight: 600; color: var(--muted);
  }

  /* ‚îÄ‚îÄ Block switcher ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */
  .block-tabs {
    display: flex; gap: 8px;
    background: var(--card);
    border: 1px solid var(--border);
    border-radius: 12px;
    padding: 6px;
    margin-bottom: 28px;
  }
  .block-tab {
    flex: 1; padding: 10px 16px;
    border-radius: 8px;
    cursor: pointer;
    font-size: 12px; font-weight: 700;
    text-align: center;
    transition: all 0.2s;
    color: var(--muted);
    border: none;
    background: transparent;
    font-family: 'Manrope', sans-serif;
  }
  .block-tab:hover { background: var(--light); color: var(--text); }
  .block-tab.active-dev { background: var(--blue); color: white; }
  .block-tab.active-ten { background: var(--teal); color: white; }

  /* ‚îÄ‚îÄ Results screen ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */
  .results { display: none; }
  .results.visible { display: block; }
  .result-hero {
    background: linear-gradient(135deg, var(--navy), #0f2050);
    color: white;
    border-radius: 20px;
    padding: 40px;
    margin-bottom: 24px;
    text-align: center;
    position: relative;
    overflow: hidden;
  }
  .result-hero::before {
    content: '';
    position: absolute; inset: 0;
    pointer-events: none;
    background: radial-gradient(circle at 70% 50%, rgba(36,81,163,0.4), transparent 60%);
  }
  .result-hero > * { position: relative; }
  .result-title { font-family: 'Spectral', serif; font-size: 28px; font-weight: 600; margin-bottom: 8px; }
  .result-sub { font-size: 14px; color: rgba(255,255,255,0.6); margin-bottom: 32px; }
  .ida-display {
    display: inline-flex; flex-direction: column; align-items: center;
    background: rgba(255,255,255,0.08);
    border: 1px solid rgba(255,255,255,0.15);
    border-radius: 20px;
    padding: 24px 48px;
    margin-bottom: 16px;
  }
  .ida-value {
    font-size: 64px; font-weight: 800; line-height: 1;
    background: linear-gradient(135deg, #60a5fa, #a8d4ff);
    -webkit-background-clip: text; -webkit-text-fill-color: transparent;
  }
  .ida-label { font-size: 12px; color: rgba(255,255,255,0.5); text-transform: uppercase; letter-spacing: 0.1em; margin-top: 6px; }
  .result-zone {
    display: inline-block;
    padding: 6px 18px;
    border-radius: 100px;
    font-size: 13px; font-weight: 700;
  }
  .zone-neutral { background: #fef3c7; color: #92400e; }
  .zone-positive { background: #dcfce7; color: #166534; }
  .zone-negative { background: #fee2e2; color: #991b1b; }

  .results-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 16px;
    margin-bottom: 24px;
  }
  .res-card {
    background: var(--card);
    border: 1px solid var(--border);
    border-radius: 14px;
    padding: 20px;
  }
  .res-card-title {
    font-size: 11px; font-weight: 700; text-transform: uppercase;
    letter-spacing: 0.07em; color: var(--muted); margin-bottom: 14px;
  }
  .res-row {
    display: flex; align-items: center; gap: 12px; margin-bottom: 10px;
  }
  .res-row-label { font-size: 12px; color: var(--muted); flex: 1; }
  .res-bar-wrap { flex: 2; height: 8px; background: var(--light); border-radius: 100px; overflow: hidden; }
  .res-bar-fill { height: 100%; border-radius: 100px; }
  .res-val { font-size: 12px; font-weight: 800; min-width: 36px; text-align: right; }
  .scale-result {
    text-align: center;
  }
  .scale-num {
    font-size: 52px; font-weight: 800; color: var(--navy); line-height: 1;
  }
  .scale-out-of { font-size: 14px; color: var(--muted); }
  .scale-visual {
    margin: 12px 0;
    height: 12px;
    background: linear-gradient(90deg, #ef4444, #f59e0b, #22c55e);
    border-radius: 100px;
    position: relative;
  }
  .scale-marker {
    width: 20px; height: 20px;
    background: var(--navy);
    border: 3px solid white;
    border-radius: 50%;
    position: absolute;
    top: -4px;
    transform: translateX(-50%);
    box-shadow: 0 2px 8px rgba(0,0,0,0.2);
    transition: left 0.8s ease;
  }
  .scale-endlabels { display: flex; justify-content: space-between; font-size: 10px; color: var(--muted); font-weight: 600; }

  /* ‚îÄ‚îÄ Segment selector ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */
  .segment-grid {
    display: flex; gap: 8px; flex-wrap: wrap; margin-bottom: 24px;
  }
  .seg-btn {
    padding: 8px 16px;
    border: 1.5px solid var(--border);
    border-radius: 100px;
    background: var(--bg);
    font-family: 'Manrope', sans-serif;
    font-size: 12px; font-weight: 600;
    color: var(--muted);
    cursor: pointer;
    transition: all 0.15s;
  }
  .seg-btn:hover { border-color: var(--teal); color: var(--teal); }
  .seg-btn.active { background: var(--teal); border-color: var(--teal); color: white; }
  .seg-label { font-size: 12px; font-weight: 600; color: var(--text); margin-bottom: 10px; }

  /* ‚îÄ‚îÄ Toast ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */
  .toast {
    position: fixed; bottom: 24px; right: 24px;
    background: var(--navy); color: white;
    padding: 12px 20px; border-radius: 12px;
    font-size: 13px; font-weight: 600;
    box-shadow: 0 4px 20px rgba(0,0,0,0.2);
    transform: translateY(80px);
    opacity: 0;
    transition: all 0.3s;
    z-index: 999;
    display: flex; align-items: center; gap: 8px;
  }
  .toast.show { transform: none; opacity: 1; }

  @media (max-width: 768px) {
    .hero-grid { grid-template-columns: 1fr; }
    .hero-right { display: none; }
    .main { grid-template-columns: 1fr; padding: 20px 16px 60px; }
    .sidebar { display: none; }
    .results-grid { grid-template-columns: 1fr; }
  }
</style>
</head>
<body class="on-hero">

<!-- ‚îÄ‚îÄ Hero ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
<header class="hero">
  <div class="hero-grid">
    <div class="hero-left">
      <div class="hero-badge"><span></span> –ö–≤–∞—Ä—Ç–∞–ª—å–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ ¬∑ III –∫–≤. 2025</div>
      <h1>–ò–Ω–¥–µ–∫—Å –¥–µ–ª–æ–≤–æ–π<br>–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ <em>–ò–î–ê</em><br>—Å–∫–ª–∞–¥—Å–∫–æ–π –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç–∏</h1>
      <p class="hero-desc">–û—Ü–µ–Ω–∏—Ç–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Ä—ã–Ω–∫–∞ –∑–∞ –ø—Ä–æ—à–µ–¥—à–∏–π –∫–≤–∞—Ä—Ç–∞–ª. –í–∞—à–∏ –æ—Ç–≤–µ—Ç—ã —Ñ–æ—Ä–º–∏—Ä—É—é—Ç —Å–≤–æ–¥–Ω—ã–π –∏–Ω–¥–µ–∫—Å –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–π —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ —Ä—ã–Ω–∫–∞ –ö–∞–∑–∞—Ö—Å—Ç–∞–Ω–∞.</p>
      <div class="hero-stats">
        <div class="stat"><div class="stat-num">14</div><div class="stat-label">–≤–æ–ø—Ä–æ—Å–æ–≤</div></div>
        <div class="stat"><div class="stat-num">~8</div><div class="stat-label">–º–∏–Ω—É—Ç</div></div>
        <div class="stat"><div class="stat-num">2</div><div class="stat-label">–ø–∞–Ω–µ–ª–∏</div></div>
      </div>
    </div>
    <div class="hero-right">
      <div style="font-size:11px;font-weight:700;text-transform:uppercase;letter-spacing:0.08em;color:rgba(255,255,255,0.4);margin-bottom:8px;">–í—ã–±–µ—Ä–∏—Ç–µ —Å–≤–æ—é —Ä–æ–ª—å</div>
      <div class="panel-card dev" onclick="selectPanel('dev')">
        <div class="pc-top">
          <div class="pc-title">üèó –î–µ–≤–µ–ª–æ–ø–µ—Ä / –°–æ–±—Å—Ç–≤–µ–Ω–Ω–∏–∫</div>
          <div class="pc-count">14 –≤–æ–ø—Ä.</div>
        </div>
        <div class="pc-desc">–î–ª—è —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–∏–∫–æ–≤, –¥–µ–≤–µ–ª–æ–ø–µ—Ä–æ–≤ –∏ —É–ø—Ä–∞–≤–ª—è—é—â–∏—Ö –∫–æ–º–ø–∞–Ω–∏–π <span class="pc-arrow">‚Üí</span></div>
      </div>
      <div class="panel-card ten" onclick="selectPanel('ten')">
        <div class="pc-top">
          <div class="pc-title">üì¶ –ê—Ä–µ–Ω–¥–∞—Ç–æ—Ä</div>
          <div class="pc-count">14 –≤–æ–ø—Ä.</div>
        </div>
        <div class="pc-desc">–î–ª—è –∫–æ–º–ø–∞–Ω–∏–π-–∞—Ä–µ–Ω–¥–∞—Ç–æ—Ä–æ–≤ —Å–∫–ª–∞–¥—Å–∫–∏—Ö –ø–ª–æ—â–∞–¥–µ–π <span class="pc-arrow">‚Üí</span></div>
      </div>
    </div>
  </div>
</header>

<!-- ‚îÄ‚îÄ Progress ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
<div class="progress-wrap" id="progressWrap" style="display:none">
  <div class="progress-inner">
    <div class="progress-label" id="progressLabel">–†–∞–∑–¥–µ–ª 1 –∏–∑ 5</div>
    <div class="progress-bar"><div class="progress-fill" id="progressFill"></div></div>
    <div class="progress-pct" id="progressPct">0%</div>
  </div>
</div>

<!-- ‚îÄ‚îÄ Main ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
<div class="main" id="mainWrap" style="display:none">

  <!-- Sidebar -->
  <nav class="sidebar" id="sidebar"></nav>

  <!-- Content -->
  <div id="content">
    <div class="block-tabs" id="blockTabs" style="display:none">
      <button class="block-tab" id="tabDev" onclick="switchPanel('dev')">üèó –ë–ª–æ–∫ I ‚Äî –î–µ–≤–µ–ª–æ–ø–µ—Ä—ã</button>
      <button class="block-tab" id="tabTen" onclick="switchPanel('ten')">üì¶ –ë–ª–æ–∫ II ‚Äî –ê—Ä–µ–Ω–¥–∞—Ç–æ—Ä—ã</button>
    </div>
    <div id="formArea"></div>
    <div class="results" id="resultsArea"></div>
  </div>
</div>

<!-- Toast -->
<div class="toast" id="toast"></div>

<script>
// ‚îÄ‚îÄ CONFIG ‚Äî –≤—Å—Ç–∞–≤—å—Ç–µ —Å—é–¥–∞ URL –≤–∞—à–µ–≥–æ Google Apps Script ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
const SCRIPT_URL = https://script.google.com/macros/s/AKfycbyGZiQ9NZKzWa1j2cMV2PzCk5j-P4vHtYvmU7nHYmI92MRMLgNig_bQlDIGqT0cLq3G7w/exec;
// ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ

// ‚îÄ‚îÄ Data ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
const BLOCKS = {
  dev: {
    color: 'blue',
    sections: [
      {
        id: 'd1', title: '–î–µ–ª–æ–≤–∞—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å', icon: 'üìä', iconCls: 'icon-blue',
        sub: '–û–±—â–∏–π —Å–ø—Ä–æ—Å –∏ –∑–∞–ø—Ä–æ—Å—ã –Ω–∞ —Ä—ã–Ω–∫–µ',
        questions: [
          { id:'d1_1', num:'1.1', text:'–ö–∞–∫ –∏–∑–º–µ–Ω–∏–ª—Å—è —Å–ø—Ä–æ—Å –Ω–∞ –∞—Ä–µ–Ω–¥—É –≤–∞—à–∏—Ö –æ–±—ä–µ–∫—Ç–æ–≤ –ø–æ —Å—Ä–∞–≤–Ω–µ–Ω–∏—é —Å –ø—Ä–æ—à–ª—ã–º –∫–≤–∞—Ä—Ç–∞–ª–æ–º?', opts:['–í—ã—Ä–æ—Å','–ù–µ –∏–∑–º–µ–Ω–∏–ª—Å—è','–°–Ω–∏–∑–∏–ª—Å—è'], tags:['key'] },
          { id:'d1_2', num:'1.2', text:'–ö–∞–∫ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏ –∫–∞—á–µ—Å—Ç–≤–æ –∑–∞–ø—Ä–æ—Å–æ–≤ –æ—Ç –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã—Ö –∞—Ä–µ–Ω–¥–∞—Ç–æ—Ä–æ–≤ (–≤–∫–ª—é—á–∞—è —Ç–µ–º–ø –ø—Ä–∏–Ω—è—Ç–∏—è –∏–º–∏ —Ä–µ—à–µ–Ω–∏–π)?', opts:['–£–ª—É—á—à–∏–ª–æ—Å—å','–ù–µ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å','–£—Ö—É–¥—à–∏–ª–æ—Å—å'], tags:['merged'] },
          { id:'d1_3', num:'1.3', text:'–ö–∞–∫ –≤—ã –æ—Ü–µ–Ω–∏–≤–∞–µ—Ç–µ —Ç–µ–∫—É—â–∏–π —É—Ä–æ–≤–µ–Ω—å —Å–ø—Ä–æ—Å–∞ –Ω–∞ —Å–∫–ª–∞–¥—Å–∫–∏–µ –ø–ª–æ—â–∞–¥–∏ –≤ –≤–∞—à–µ–º —Ä–µ–≥–∏–æ–Ω–µ?', opts:['–í—ã—Å–æ–∫–∏–π','–£–º–µ—Ä–µ–Ω–Ω—ã–π','–ù–∏–∑–∫–∏–π'], tags:[] },
        ]
      },
      {
        id: 'd2', title: '–ö–æ–º–º–µ—Ä—á–µ—Å–∫–∏–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏', icon: 'üí∞', iconCls: 'icon-navy',
        sub: '–°—Ç–∞–≤–∫–∏, –≤–∞–∫–∞–Ω—Ç–Ω–æ—Å—Ç—å, –¥–æ–≥–æ–≤–æ—Ä—ã',
        questions: [
          { id:'d2_1', num:'2.1', text:'–ö–∞–∫ –∏–∑–º–µ–Ω–∏–ª–∏—Å—å –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ–º—ã–µ —Å—Ç–∞–≤–∫–∏ –∞—Ä–µ–Ω–¥—ã –Ω–∞ –≤–∞—à–∏ –æ–±—ä–µ–∫—Ç—ã?', opts:['–í—ã—Ä–æ—Å–ª–∏','–û—Å—Ç–∞–ª–∏—Å—å –ø—Ä–µ–∂–Ω–∏–º–∏','–°–Ω–∏–∑–∏–ª–∏—Å—å'], tags:['key'] },
          { id:'d2_2', num:'2.2', text:'–ü—Ä–∞–∫—Ç–∏–∫—É–µ—Ç–µ –ª–∏ –≤—ã –¥–∏—Å–∫–æ–Ω—Ç—ã –∫ –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ–º—ã–º —Å—Ç–∞–≤–∫–∞–º?', opts:['–ù–µ—Ç','–°–∏—Ç—É–∞—Ç–∏–≤–Ω–æ','–†–µ–≥—É–ª—è—Ä–Ω–æ'], tags:['key'] },
          { id:'d2_3', num:'2.3', text:'–ö–∞–∫ –∏–∑–º–µ–Ω–∏–ª—Å—è —É—Ä–æ–≤–µ–Ω—å –≤–∞–∫–∞–Ω—Ç–Ω–æ—Å—Ç–∏ –≤–∞—à–∏—Ö –æ–±—ä–µ–∫—Ç–æ–≤?', opts:['–°–Ω–∏–∑–∏–ª—Å—è','–ù–µ –∏–∑–º–µ–Ω–∏–ª—Å—è','–í—ã—Ä–æ—Å'], tags:['key'] },
          { id:'d2_4', num:'2.4', text:'–ö–∞–∫ –∏–∑–º–µ–Ω–∏–ª—Å—è —Å—Ä–µ–¥–Ω–∏–π —Å—Ä–æ–∫ –ø–æ–∏—Å–∫–∞ –∞—Ä–µ–Ω–¥–∞—Ç–æ—Ä–∞ (—Å—Ä–æ–∫ —ç–∫—Å–ø–æ–∑–∏—Ü–∏–∏)?', opts:['–°–æ–∫—Ä–∞—Ç–∏–ª—Å—è','–ù–µ –∏–∑–º–µ–Ω–∏–ª—Å—è','–£–≤–µ–ª–∏—á–∏–ª—Å—è'], tags:[] },
          { id:'d2_5', num:'2.5', text:'–ö–∞–∫ –∏–∑–º–µ–Ω–∏–ª—Å—è –æ–±—ä—ë–º –Ω–æ–≤—ã—Ö –¥–æ–≥–æ–≤–æ—Ä–æ–≤ –∞—Ä–µ–Ω–¥—ã?', opts:['–í—ã—Ä–æ—Å','–ù–µ –∏–∑–º–µ–Ω–∏–ª—Å—è','–°–Ω–∏–∑–∏–ª—Å—è'], tags:['key'] },
        ]
      },
      {
        id: 'd3', title: '–ò–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏ –∏ –¥–µ–≤–µ–ª–æ–ø–º–µ–Ω—Ç', icon: 'üè¢', iconCls: 'icon-blue',
        sub: '–ü–ª–∞–Ω—ã —Å—Ç—Ä–æ–∏—Ç–µ–ª—å—Å—Ç–≤–∞ –∏ —Ñ–∏–Ω–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–∏–µ',
        questions: [
          { id:'d3_1', num:'3.1', text:'–ü–ª–∞–Ω–∏—Ä—É–µ—Ç–µ –ª–∏ –≤—ã –Ω–∞—á–∞—Ç—å –Ω–æ–≤—ã–µ —Å—Ç—Ä–æ–∏—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–æ–µ–∫—Ç—ã –≤ —Ç–µ—á–µ–Ω–∏–µ —Å–ª–µ–¥—É—é—â–∏—Ö 6 –º–µ—Å—è—Ü–µ–≤?', opts:['–î–∞','–†–∞—Å—Å–º–∞—Ç—Ä–∏–≤–∞–µ–º','–ù–µ—Ç'], tags:[] },
          { id:'d3_2', num:'3.2', text:'–ö–∞–∫ –∏–∑–º–µ–Ω–∏–ª–∞—Å—å —Å–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç—å –¥–µ–≤–µ–ª–æ–ø–º–µ–Ω—Ç–∞ (—Å—Ç–æ–∏–º–æ—Å—Ç—å –∑–µ–º–ª–∏ + –∑–∞—Ç—Ä–∞—Ç—ã –Ω–∞ —Å—Ç—Ä–æ–∏—Ç–µ–ª—å—Å—Ç–≤–æ)?', opts:['–°–Ω–∏–∑–∏–ª–∞—Å—å','–ù–µ –∏–∑–º–µ–Ω–∏–ª–∞—Å—å','–í—ã—Ä–æ—Å–ª–∞'], tags:['merged'] },
          { id:'d3_3', num:'3.3', text:'–ö–∞–∫ –∏–∑–º–µ–Ω–∏–ª–∞—Å—å –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å —Ñ–∏–Ω–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–∏—è (–∫—Ä–µ–¥–∏—Ç—ã, –ø—Ä–æ–µ–∫—Ç–Ω–æ–µ —Ñ–∏–Ω–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–∏–µ)?', opts:['–£–ª—É—á—à–∏–ª–∞—Å—å','–ù–µ –∏–∑–º–µ–Ω–∏–ª–∞—Å—å','–£—Ö—É–¥—à–∏–ª–∞—Å—å'], tags:['key'] },
        ]
      },
      {
        id: 'd4', title: '–û–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏', icon: '‚öôÔ∏è', iconCls: 'icon-navy',
        sub: '–†–∞—Å—Ö–æ–¥—ã –∏ –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç—å –∞—Ä–µ–Ω–¥–∞—Ç–æ—Ä–æ–≤',
        questions: [
          { id:'d4_1', num:'4.1', text:'–ö–∞–∫ –∏–∑–º–µ–Ω–∏–ª–∏—Å—å –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã (–∫–æ–º–º—É–Ω–∞–ª—å–Ω—ã–µ —É—Å–ª—É–≥–∏, –æ—Ö—Ä–∞–Ω–∞, –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ)?', opts:['–°–Ω–∏–∑–∏–ª–∏—Å—å','–ù–µ –∏–∑–º–µ–Ω–∏–ª–∏—Å—å','–í—ã—Ä–æ—Å–ª–∏'], tags:[] },
          { id:'d4_2', num:'4.2', text:'–ö–∞–∫ –∏–∑–º–µ–Ω–∏–ª–∞—Å—å –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç—å –∞—Ä–µ–Ω–¥–∞—Ç–æ—Ä–æ–≤ (–ø–ª–∞—Ç—ë–∂–Ω–∞—è –¥–∏—Å—Ü–∏–ø–ª–∏–Ω–∞ –∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–æ—Å—Ä–æ—á–Ω—ã—Ö —Ä–∞—Å—Ç–æ—Ä–∂–µ–Ω–∏–π)?', opts:['–£–ª—É—á—à–∏–ª–∞—Å—å','–ù–µ –∏–∑–º–µ–Ω–∏–ª–∞—Å—å','–£—Ö—É–¥—à–∏–ª–∞—Å—å'], tags:['merged'] },
        ]
      },
      {
        id: 'd5', title: '–û–∂–∏–¥–∞–Ω–∏—è (3‚Äì6 –º–µ—Å.)', icon: 'üî≠', iconCls: 'icon-gold',
        sub: '–ü—Ä–æ–≥–Ω–æ–∑ –Ω–∞ —Å–ª–µ–¥—É—é—â–∏–µ –ø–æ–ª–≥–æ–¥–∞',
        questions: [
          { id:'d5_1', num:'5.1', text:'–ö–∞–∫–æ–≤—ã –≤–∞—à–∏ –æ–∂–∏–¥–∞–Ω–∏—è –ø–æ —Å–ø—Ä–æ—Å—É –Ω–∞ —Å–∫–ª–∞–¥—Å–∫–∏–µ –ø–ª–æ—â–∞–¥–∏?', opts:['–í—ã—Ä–∞—Å—Ç–µ—Ç','–û—Å—Ç–∞–Ω–µ—Ç—Å—è –ø—Ä–µ–∂–Ω–∏–º','–°–Ω–∏–∑–∏—Ç—Å—è'], tags:['key'] },
          { id:'d5_2', num:'5.2', text:'–ö–∞–∫–æ–≤—ã –≤–∞—à–∏ –æ–∂–∏–¥–∞–Ω–∏—è –ø–æ —Å—Ç–∞–≤–∫–∞–º –∞—Ä–µ–Ω–¥—ã?', opts:['–í—ã—Ä–∞—Å—Ç—É—Ç','–û—Å—Ç–∞–Ω—É—Ç—Å—è –ø—Ä–µ–∂–Ω–∏–º–∏','–°–Ω–∏–∑—è—Ç—Å—è'], tags:['key'] },
          { id:'d5_3', num:'5.3', text:'–ö–∞–∫–æ–≤—ã –≤–∞—à–∏ –æ–∂–∏–¥–∞–Ω–∏—è –ø–æ —É—Ä–æ–≤–Ω—é –≤–∞–∫–∞–Ω—Ç–Ω–æ—Å—Ç–∏?', opts:['–°–Ω–∏–∑–∏—Ç—Å—è','–ë–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π','–í—ã—Ä–∞—Å—Ç–µ—Ç'], tags:[] },
          { id:'d5_4', num:'5.4', text:'–û–±—â–∏–π –¥–µ–ª–æ–≤–æ–π –æ–ø—Ç–∏–º–∏–∑–º –Ω–∞ —Å–ª–µ–¥—É—é—â–∏–µ 6 –º–µ—Å—è—Ü–µ–≤', opts:['–ü–æ–∑–∏—Ç–∏–≤–Ω—ã–π','–ù–µ–π—Ç—Ä–∞–ª—å–Ω—ã–π','–ù–µ–≥–∞—Ç–∏–≤–Ω—ã–π'], tags:['key'] },
        ]
      },
    ]
  },
  ten: {
    color: 'teal',
    sections: [
      {
        id: 't1', title: '–û–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–∞—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å', icon: 'üì¶', iconCls: 'icon-teal',
        sub: '–¢–æ–≤–∞—Ä–æ–æ–±–æ—Ä–æ—Ç –∏ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω–æ—Å—Ç—å',
        questions: [
          { id:'t1_1', num:'1.1', text:'–ö–∞–∫ –∏–∑–º–µ–Ω–∏–ª—Å—è –æ–±—ä—ë–º —Ç–æ–≤–∞—Ä–æ–æ–±–æ—Ä–æ—Ç–∞ –≤–∞—à–µ–π –∫–æ–º–ø–∞–Ω–∏–∏ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–π –∫–≤–∞—Ä—Ç–∞–ª (–æ—Ç—Ä–∞–∂–∞–µ—Ç —Ç–∞–∫–∂–µ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω–æ—Å—Ç—å —Å–∫–ª–∞–¥–∞)?', opts:['–í—ã—Ä–æ—Å','–ù–µ –∏–∑–º–µ–Ω–∏–ª—Å—è','–°–Ω–∏–∑–∏–ª—Å—è'], tags:['merged','key'] },
          { id:'t1_2', num:'1.2', text:'–°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –ª–∏ —Ç–µ–∫—É—â–∏–π –æ–±—ä—ë–º —Å–∫–ª–∞–¥—Å–∫–∏—Ö –ø–ª–æ—â–∞–¥–µ–π –≤–∞—à–∏–º –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω—ã–º –ø–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç—è–º?', opts:['–ò–∑–±—ã—Ç–æ–∫','–í –Ω–æ—Ä–º–µ','–î–µ—Ñ–∏—Ü–∏—Ç'], tags:['key'] },
        ]
      },
      {
        id: 't2', title: '–£—Å–ª–æ–≤–∏—è –∞—Ä–µ–Ω–¥—ã', icon: 'üìã', iconCls: 'icon-teal',
        sub: '–°—Ç–∞–≤–∫–∏, –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å, –≥–∏–±–∫–æ—Å—Ç—å',
        questions: [
          { id:'t2_1', num:'2.1', text:'–ö–∞–∫ –∏–∑–º–µ–Ω–∏–ª–∏—Å—å –∞—Ä–µ–Ω–¥–Ω—ã–µ —Å—Ç–∞–≤–∫–∏ –Ω–∞ –∑–∞–Ω–∏–º–∞–µ–º—ã–µ –≤–∞–º–∏ —Å–∫–ª–∞–¥—Å–∫–∏–µ –ø–ª–æ—â–∞–¥–∏?', opts:['–°–Ω–∏–∑–∏–ª–∏—Å—å','–ù–µ –∏–∑–º–µ–Ω–∏–ª–∏—Å—å','–í—ã—Ä–æ—Å–ª–∏'], tags:['key'] },
          { id:'t2_2', num:'2.2', text:'–ö–∞–∫ –≤—ã –æ—Ü–µ–Ω–∏–≤–∞–µ—Ç–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –ø–æ–¥—Ö–æ–¥—è—â–∏—Ö —Å–∫–ª–∞–¥—Å–∫–∏—Ö –ø–ª–æ—â–∞–¥–µ–π –Ω–∞ —Ä—ã–Ω–∫–µ (–≤–∫–ª—é—á–∞—è –ª—ë–≥–∫–æ—Å—Ç—å –ø–æ–∏—Å–∫–∞ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã)?', opts:['–í—ã—Å–æ–∫–∞—è','–£–º–µ—Ä–µ–Ω–Ω–∞—è','–ù–∏–∑–∫–∞—è'], tags:['merged'] },
          { id:'t2_3', num:'2.3', text:'–ö–∞–∫ –∏–∑–º–µ–Ω–∏–ª–∞—Å—å –≥–∏–±–∫–æ—Å—Ç—å –∞—Ä–µ–Ω–¥–æ–¥–∞—Ç–µ–ª–µ–π –≤ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏–∏ —É—Å–ª–æ–≤–∏–π –¥–æ–≥–æ–≤–æ—Ä–æ–≤?', opts:['–í—ã—Ä–æ—Å–ª–∞','–ù–µ –∏–∑–º–µ–Ω–∏–ª–∞—Å—å','–°–Ω–∏–∑–∏–ª–∞—Å—å'], tags:['key'] },
        ]
      },
      {
        id: 't3', title: '–õ–æ–≥–∏—Å—Ç–∏–∫–∞', icon: 'üöõ', iconCls: 'icon-green',
        sub: '–ò–∑–¥–µ—Ä–∂–∫–∏ –∏ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞',
        questions: [
          { id:'t3_1', num:'3.1', text:'–ö–∞–∫ –∏–∑–º–µ–Ω–∏–ª–∏—Å—å –≤–∞—à–∏ –æ–±—â–∏–µ –ª–æ–≥–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ –∏–∑–¥–µ—Ä–∂–∫–∏ (—Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç, —Ñ—É–ª—Ñ–∏–ª–º–µ–Ω—Ç)?', opts:['–°–Ω–∏–∑–∏–ª–∏—Å—å','–ù–µ –∏–∑–º–µ–Ω–∏–ª–∏—Å—å','–í—ã—Ä–æ—Å–ª–∏'], tags:[] },
          { id:'t3_2', num:'3.2', text:'–ö–∞–∫ –∏–∑–º–µ–Ω–∏–ª–∏—Å—å —Å—Ä–æ–∫–∏ –¥–æ—Å—Ç–∞–≤–∫–∏ —Ç–æ–≤–∞—Ä–æ–≤ –¥–æ –≤–∞—à–µ–≥–æ —Å–∫–ª–∞–¥–∞ (–æ—Ç—Ä–∞–∂–∞–µ—Ç –∫–∞—á–µ—Å—Ç–≤–æ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω–æ–π –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã)?', opts:['–°–æ–∫—Ä–∞—Ç–∏–ª–∏—Å—å','–ù–µ –∏–∑–º–µ–Ω–∏–ª–∏—Å—å','–£–≤–µ–ª–∏—á–∏–ª–∏—Å—å'], tags:['merged'] },
        ]
      },
      {
        id: 't4', title: '–§–∏–Ω–∞–Ω—Å—ã –∏ –¥–µ–ª–æ–≤–∞—è —Å—Ä–µ–¥–∞', icon: 'üíº', iconCls: 'icon-green',
        sub: '–í—ã—Ä—É—á–∫–∞, –Ω–∞–≥—Ä—É–∑–∫–∞, —Ñ–∏–Ω–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–∏–µ',
        questions: [
          { id:'t4_1', num:'4.1', text:'–ö–∞–∫ –∏–∑–º–µ–Ω–∏–ª—Å—è –æ–±—ä—ë–º –ø—Ä–æ–¥–∞–∂ / –≤—ã—Ä—É—á–∫–∏ –≤–∞—à–µ–π –∫–æ–º–ø–∞–Ω–∏–∏ (–∫–ª—é—á–µ–≤–æ–π –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –ø–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç–∏ –≤ –ø–ª–æ—â–∞–¥—è—Ö)?', opts:['–í—ã—Ä–æ—Å','–ù–µ –∏–∑–º–µ–Ω–∏–ª—Å—è','–°–Ω–∏–∑–∏–ª—Å—è'], tags:['merged','key'] },
          { id:'t4_2', num:'4.2', text:'–ö–∞–∫ –∏–∑–º–µ–Ω–∏–ª–∞—Å—å —Ñ–∏–Ω–∞–Ω—Å–æ–≤–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ –∞—Ä–µ–Ω–¥—ã –Ω–∞ –±—é–¥–∂–µ—Ç –∫–æ–º–ø–∞–Ω–∏–∏?', opts:['–°–Ω–∏–∑–∏–ª–∞—Å—å','–ù–µ –∏–∑–º–µ–Ω–∏–ª–∞—Å—å','–í—ã—Ä–æ—Å–ª–∞'], tags:['key'] },
          { id:'t4_3', num:'4.3', text:'–ö–∞–∫ –∏–∑–º–µ–Ω–∏–ª–∞—Å—å –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –±–∞–Ω–∫–æ–≤—Å–∫–æ–≥–æ —Ñ–∏–Ω–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–∏—è –¥–ª—è –≤–∞—à–µ–≥–æ –±–∏–∑–Ω–µ—Å–∞?', opts:['–£–ª—É—á—à–∏–ª–∞—Å—å','–ù–µ –∏–∑–º–µ–Ω–∏–ª–∞—Å—å','–£—Ö—É–¥—à–∏–ª–∞—Å—å'], tags:[] },
        ]
      },
      {
        id: 't5', title: '–û–∂–∏–¥–∞–Ω–∏—è (3‚Äì6 –º–µ—Å.)', icon: 'üî≠', iconCls: 'icon-gold',
        sub: '–ü—Ä–æ–≥–Ω–æ–∑ –Ω–∞ —Å–ª–µ–¥—É—é—â–∏–µ –ø–æ–ª–≥–æ–¥–∞',
        questions: [
          { id:'t5_1', num:'5.1', text:'–ü–ª–∞–Ω–∏—Ä—É–µ—Ç–µ –ª–∏ –≤—ã –∏–∑–º–µ–Ω–µ–Ω–∏–µ –æ–±—ä—ë–º–∞ –∞—Ä–µ–Ω–¥—É–µ–º—ã—Ö —Å–∫–ª–∞–¥—Å–∫–∏—Ö –ø–ª–æ—â–∞–¥–µ–π?', opts:['–†–∞—Å—à–∏—Ä–µ–Ω–∏–µ','–ë–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π','–°–æ–∫—Ä–∞—â–µ–Ω–∏–µ'], tags:['key'] },
          { id:'t5_2', num:'5.2', text:'–ö–∞–∫–æ–≤—ã –æ–∂–∏–¥–∞–Ω–∏—è –ø–æ –æ–±—ä—ë–º—É —Ç–æ–≤–∞—Ä–æ–æ–±–æ—Ä–æ—Ç–∞ –≤–∞—à–µ–π –∫–æ–º–ø–∞–Ω–∏–∏ –≤ —Å–ª–µ–¥—É—é—â–∏–µ 3‚Äì6 –º–µ—Å—è—Ü–µ–≤?', opts:['–†–æ—Å—Ç','–°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å','–°–Ω–∏–∂–µ–Ω–∏–µ'], tags:['key'] },
          { id:'t5_3', num:'5.3', text:'–ö–∞–∫–æ–≤—ã –æ–∂–∏–¥–∞–Ω–∏—è –ø–æ —Å—Ç–∞–≤–∫–∞–º –∞—Ä–µ–Ω–¥—ã –¥–ª—è –≤–∞—à–µ–≥–æ —Å–µ–≥–º–µ–Ω—Ç–∞?', opts:['–°–Ω–∏–∑—è—Ç—Å—è','–ë–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π','–í—ã—Ä–∞—Å—Ç—É—Ç'], tags:['key'] },
          { id:'t5_4', num:'5.4', text:'–û–±—â–∏–π –¥–µ–ª–æ–≤–æ–π –æ–ø—Ç–∏–º–∏–∑–º –≤–∞—à–µ–π –∫–æ–º–ø–∞–Ω–∏–∏ –Ω–∞ —Å–ª–µ–¥—É—é—â–∏–µ 6 –º–µ—Å—è—Ü–µ–≤', opts:['–ü–æ–∑–∏—Ç–∏–≤–Ω—ã–π','–ù–µ–π—Ç—Ä–∞–ª—å–Ω—ã–π','–ù–µ–≥–∞—Ç–∏–≤–Ω—ã–π'], tags:['key'] },
        ]
      },
    ]
  }
};

// ‚îÄ‚îÄ State ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
let state = {
  panel: null,
  currentSection: 0,
  answers: {},
  scaleVal: null,
  openText: '',
  segment: null,
};

// ‚îÄ‚îÄ Panel select ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
function selectPanel(p) {
  state.panel = p;
  state.currentSection = 0;
  state.answers = {};
  state.scaleVal = null;
  document.body.classList.remove('on-hero');
  document.getElementById('progressWrap').style.display = '';
  document.getElementById('mainWrap').style.display = '';
  renderAll();
  window.scrollTo({ top: document.getElementById('progressWrap').offsetTop - 10, behavior: 'smooth' });
}

function switchPanel(p) {
  state.panel = p;
  state.currentSection = 0;
  renderAll();
}

// ‚îÄ‚îÄ Render ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
function renderAll() {
  const block = BLOCKS[state.panel];
  const isTeal = state.panel === 'ten';
  const totalSections = block.sections.length;

  // Progress
  const pct = Math.round((state.currentSection / totalSections) * 100);
  document.getElementById('progressFill').style.width = pct + '%';
  document.getElementById('progressPct').textContent = pct + '%';
  document.getElementById('progressLabel').textContent =
    state.currentSection < totalSections
      ? `–†–∞–∑–¥–µ–ª ${state.currentSection + 1} –∏–∑ ${totalSections}`
      : '–ò—Ç–æ–≥–æ–≤—ã–π —Ä–∞–∑–¥–µ–ª';

  // Sidebar
  const sb = document.getElementById('sidebar');
  let sbHtml = `<div class="sidebar-panel">${isTeal ? 'üì¶ –ê—Ä–µ–Ω–¥–∞—Ç–æ—Ä' : 'üèó –î–µ–≤–µ–ª–æ–ø–µ—Ä'}</div>`;
  block.sections.forEach((sec, i) => {
    const done = i < state.currentSection;
    const active = i === state.currentSection;
    sbHtml += `<a class="nav-item ${active ? 'active' : ''} ${done ? 'done' : ''}" onclick="goToSection(${i})">
      <span class="nav-dot">${done ? '‚úì' : i+1}</span>
      <span>${sec.title}</span>
    </a>`;
  });
  sb.innerHTML = sbHtml;

  // Form area
  const formArea = document.getElementById('formArea');
  const resultsArea = document.getElementById('resultsArea');

  if (state.currentSection >= totalSections) {
    formArea.style.display = 'none';
    resultsArea.classList.add('visible');
    renderResults();
    return;
  }

  formArea.style.display = '';
  resultsArea.classList.remove('visible');

  const sec = block.sections[state.currentSection];
  const isLast = state.currentSection === totalSections - 1;

  let html = `
    <div class="section visible ${isTeal ? 'teal-block' : ''}">
      <div class="section-header">
        <div class="section-icon ${sec.iconCls}">${sec.icon}</div>
        <div>
          <div class="section-title">${sec.title}</div>
          <div class="section-sub">${sec.sub} ¬∑ –†–∞–∑–¥–µ–ª ${state.currentSection + 1} –∏–∑ ${totalSections}</div>
        </div>
      </div>`;

  // Segment selector for Block II section 1
  if (isTeal && state.currentSection === 0) {
    const segs = ['E-commerce / –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å', '–õ–æ–≥–∏—Å—Ç–∏–∫–∞ / 3PL', '–†–∏—Ç–µ–π–ª', '–ü—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–æ', 'FMCG / –¥–∏—Å—Ç—Ä–∏–±—É—Ü–∏—è'];
    html += `<div class="seg-label">–û—Ç—Ä–∞—Å–ª–µ–≤–æ–π –ø—Ä–æ—Ñ–∏–ª—å –≤–∞—à–µ–π –∫–æ–º–ø–∞–Ω–∏–∏:</div>
    <div class="segment-grid">`;
    segs.forEach(s => {
      html += `<button class="seg-btn ${state.segment === s ? 'active' : ''}" onclick="setSegment('${s}')">${s}</button>`;
    });
    html += `</div>`;
  }

  html += `<div class="questions">`;

  sec.questions.forEach(q => {
    const answered = state.answers[q.id] !== undefined;
    const tagHtml = ''; // tags hidden from users

    html += `
      <div class="q-card ${answered ? 'answered' : ''}" id="qc_${q.id}">
        <div class="q-top">
          <div class="q-num">${q.num}</div>
          <div class="q-text">${q.text}</div>
        </div>

        <div class="options">`;

    q.opts.forEach((opt, oi) => {
      html += `
          <div class="opt">
            <input type="radio" name="${q.id}" id="${q.id}_${oi}" value="${oi}"
              ${state.answers[q.id] === oi ? 'checked' : ''}
              onchange="answer('${q.id}', ${oi})">
            <label for="${q.id}_${oi}">${opt}</label>
          </div>`;
    });

    html += `</div></div>`;
  });

  html += `</div>`;

  // Scale + open on last section
  if (isLast) {
    const scaleColors = ['#ef4444','#f97316','#f59e0b','#eab308','#84cc16','#22c55e','#16a34a','#15803d','#166534','#134e2a'];
    html += `
    <div class="scale-card" style="margin-top:20px">
      <div class="scale-top">
        <div class="scale-icon">‚öñÔ∏è</div>
        <div>
          <div class="scale-title">–ò—Ç–æ–≥–æ–≤–∞—è –æ—Ü–µ–Ω–∫–∞: –±–∞–ª–∞–Ω—Å —Ä—ã–Ω–∫–∞</div>
          <div class="scale-sub">1 = –ø–æ–ª–Ω—ã–π —Ä—ã–Ω–æ–∫ –∞—Ä–µ–Ω–¥–∞—Ç–æ—Ä–∞ &nbsp;¬∑&nbsp; 5 = —Ä–∞–≤–Ω–æ–≤–µ—Å–∏–µ &nbsp;¬∑&nbsp; 10 = –ø–æ–ª–Ω—ã–π —Ä—ã–Ω–æ–∫ –∞—Ä–µ–Ω–¥–æ–¥–∞—Ç–µ–ª—è</div>
        </div>
      </div>
      <div class="scale-track">`;
    for (let i = 1; i <= 10; i++) {
      html += `<button class="scale-btn ${state.scaleVal === i ? 'selected' : ''}"
        style="background:${scaleColors[i-1]}"
        onclick="setScale(${i})">${i}</button>`;
    }
    html += `</div>
      <div class="scale-labels"><span>–†—ã–Ω–æ–∫ –∞—Ä–µ–Ω–¥–∞—Ç–æ—Ä–∞</span><span>–†–∞–≤–Ω–æ–≤–µ—Å–∏–µ</span><span>–†—ã–Ω–æ–∫ –∞—Ä–µ–Ω–¥–æ–¥–∞—Ç–µ–ª—è</span></div>
    </div>

    <div class="open-card" style="margin-top:14px">
      <div class="open-label">
        <div class="open-icon">‚úèÔ∏è</div>
        –û—Ç–∫—Ä—ã—Ç—ã–π –≤–æ–ø—Ä–æ—Å (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
      </div>
      <textarea id="openText" placeholder="–ö–∞–∫–æ–π –æ–¥–∏–Ω —Ñ–∞–∫—Ç–æ—Ä –æ–∫–∞–∑–∞–ª –Ω–∞–∏–±–æ–ª—å—à–µ–µ –≤–ª–∏—è–Ω–∏–µ –Ω–∞ –≤–∞—à –±–∏–∑–Ω–µ—Å –≤ —ç—Ç–æ–º –∫–≤–∞—Ä—Ç–∞–ª–µ?" maxlength="200" oninput="updateChar(this)">${state.openText}</textarea>
      <div class="char-count"><span id="charLeft">${200 - state.openText.length}</span> —Å–∏–º–≤–æ–ª–æ–≤ –æ—Å—Ç–∞–ª–æ—Å—å</div>
    </div>`;
  }

  // Nav buttons
  const answeredCount = sec.questions.filter(q => state.answers[q.id] !== undefined).length;
  const btnColor = isTeal ? 'btn-teal' : 'btn-primary';
  html += `
    <div class="nav-btns">
      <button class="btn btn-ghost" onclick="prevSection()" ${state.currentSection === 0 ? 'disabled style="opacity:0.4"' : ''}>
        ‚Üê –ù–∞–∑–∞–¥
      </button>
      <span class="section-counter">${answeredCount} / ${sec.questions.length} –æ—Ç–≤–µ—Ç–æ–≤</span>
      <button class="btn ${btnColor}" onclick="nextSection()">
        ${isLast ? '‚úì –ó–∞–≤–µ—Ä—à–∏—Ç—å –æ–ø—Ä–æ—Å' : '–î–∞–ª–µ–µ ‚Üí'}
      </button>
    </div>
  </div>`;

  formArea.innerHTML = html;
}

function answer(qId, val) {
  state.answers[qId] = val;
  const card = document.getElementById('qc_' + qId);
  if (card) card.classList.add('answered');
  updateCounter();
}

function setScale(v) {
  state.scaleVal = v;
  renderAll();
}

function setSegment(s) {
  state.segment = s;
  renderAll();
}

function updateChar(el) {
  state.openText = el.value;
  document.getElementById('charLeft').textContent = 200 - el.value.length;
}

function updateCounter() {
  const block = BLOCKS[state.panel];
  const sec = block.sections[state.currentSection];
  const answered = sec.questions.filter(q => state.answers[q.id] !== undefined).length;
  const el = document.querySelector('.section-counter');
  if (el) el.textContent = `${answered} / ${sec.questions.length} –æ—Ç–≤–µ—Ç–æ–≤`;
}

function nextSection() {
  const block = BLOCKS[state.panel];
  const sec = block.sections[state.currentSection];
  const unanswered = sec.questions.filter(q => state.answers[q.id] === undefined);
  if (unanswered.length > 0) {
    showToast(`‚ö†Ô∏è –û—Ç–≤–µ—Ç—å—Ç–µ –Ω–∞ ${unanswered.length} –æ—Å—Ç–∞–≤—à–∏—Ö—Å—è –≤–æ–ø—Ä–æ—Å${unanswered.length === 1 ? '' : '–∞'}`);
    // highlight unanswered
    unanswered.forEach(q => {
      const card = document.getElementById('qc_' + q.id);
      if (card) { card.style.borderColor = '#f87171'; setTimeout(() => card.style.borderColor = '', 2000); }
    });
    return;
  }
  state.currentSection++;
  renderAll();
  window.scrollTo({ top: document.getElementById('progressWrap').offsetTop - 10, behavior: 'smooth' });
}

function prevSection() {
  if (state.currentSection > 0) { state.currentSection--; renderAll(); }
}

function goToSection(i) {
  if (i <= state.currentSection) { state.currentSection = i; renderAll(); }
}

// ‚îÄ‚îÄ Results ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
function renderResults() {
  const block = BLOCKS[state.panel];
  const isTeal = state.panel === 'ten';

  // Calculate IDA
  const sectionScores = block.sections.map(sec => {
    const vals = sec.questions.map(q => {
      const ans = state.answers[q.id];
      if (ans === undefined) return 0;
      if (ans === 0) return 1;   // positive
      if (ans === 2) return -1;  // negative
      return 0;                  // neutral
    });
    return vals.reduce((a,b) => a+b, 0) / vals.length * 100;
  });

  const weights = [0.20, 0.25, 0.15, 0.10, 0.30];
  const ida = sectionScores.reduce((sum, s, i) => sum + s * weights[i], 0);
  const idaRounded = Math.round(ida * 10) / 10;

  let zone, zoneClass;
  if (idaRounded > 10) { zone = '–†—ã–Ω–æ–∫ –∞—Ä–µ–Ω–¥–æ–¥–∞—Ç–µ–ª—è'; zoneClass = 'zone-positive'; }
  else if (idaRounded < -10) { zone = '–†—ã–Ω–æ–∫ –∞—Ä–µ–Ω–¥–∞—Ç–æ—Ä–∞'; zoneClass = 'zone-negative'; }
  else { zone = '–†–∞–≤–Ω–æ–≤–µ—Å–∏–µ —Ä—ã–Ω–∫–∞'; zoneClass = 'zone-neutral'; }

  const scaleDisplay = state.scaleVal || '‚Äî';
  const scalePos = state.scaleVal ? ((state.scaleVal - 1) / 9 * 100) : 50;

  const accentColor = isTeal ? '#0a7c6e' : '#2451a3';
  const barColors = ['#3b82f6','#10b981','#8b5cf6','#f59e0b','#ef4444'];

  let html = `
    <div class="result-hero">
      <div class="result-title">–í–∞—à–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã</div>
      <div class="result-sub">${isTeal ? '–ë–ª–æ–∫ II ‚Äî –ê—Ä–µ–Ω–¥–∞—Ç–æ—Ä—ã' : '–ë–ª–æ–∫ I ‚Äî –î–µ–≤–µ–ª–æ–ø–µ—Ä—ã'} ¬∑ III –∫–≤–∞—Ä—Ç–∞–ª 2025</div>
      <div class="ida-display">
        <div class="ida-value">${idaRounded > 0 ? '+' : ''}${idaRounded}</div>
        <div class="ida-label">–°–≤–æ–¥–Ω—ã–π –ò–î–ê</div>
      </div>
      <br>
      <span class="result-zone ${zoneClass}">${zone}</span>
    </div>

    <div class="results-grid">
      <div class="res-card">
        <div class="res-card-title">–ò–î–ê –ø–æ —Ä–∞–∑–¥–µ–ª–∞–º</div>`;

  block.sections.forEach((sec, i) => {
    const s = Math.round(sectionScores[i] * 10) / 10;
    const barW = Math.abs(s);
    const barColor = s > 0 ? '#22c55e' : s < 0 ? '#ef4444' : '#94a3b8';
    html += `
        <div class="res-row">
          <div class="res-row-label">${sec.icon} ${sec.title}</div>
          <div class="res-bar-wrap"><div class="res-bar-fill" style="width:${barW}%;background:${barColor}"></div></div>
          <div class="res-val" style="color:${barColor}">${s > 0 ? '+' : ''}${s}</div>
        </div>`;
  });

  html += `</div>

      <div class="res-card">
        <div class="res-card-title">–ë–∞–ª–∞–Ω—Å —Ä—ã–Ω–∫–∞ (–≤–∞—à–∞ –æ—Ü–µ–Ω–∫–∞)</div>
        <div class="scale-result">
          <div class="scale-num">${scaleDisplay}</div>
          <div class="scale-out-of">–∏–∑ 10</div>
          <div class="scale-visual">
            <div class="scale-marker" style="left:${scalePos}%"></div>
          </div>
          <div class="scale-endlabels"><span>1 ‚Äî –ê—Ä–µ–Ω–¥–∞—Ç–æ—Ä</span><span>10 ‚Äî –ê—Ä–µ–Ω–¥–æ–¥–∞—Ç–µ–ª—å</span></div>
        </div>
        ${state.openText ? `
        <div style="margin-top:18px;padding-top:14px;border-top:1px solid var(--light)">
          <div style="font-size:10px;font-weight:700;text-transform:uppercase;letter-spacing:0.07em;color:var(--muted);margin-bottom:8px">–í–∞—à –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π</div>
          <div style="font-size:13px;color:var(--text);font-style:italic;line-height:1.5">"${state.openText}"</div>
        </div>` : ''}
      </div>
    </div>`;

  // Interpretation
  html += `
    <div class="res-card" style="margin-bottom:24px">
      <div class="res-card-title">–ö–∞–∫ –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã</div>
      <div style="display:grid;grid-template-columns:repeat(5,1fr);gap:8px;margin-top:4px">`;

  const zones = [
    { range: '–æ—Ç +30 –¥–æ +100', label: '–†—ã–Ω–æ–∫ –∞—Ä–µ–Ω–¥–æ–¥–∞—Ç–µ–ª—è', bg: '#dcfce7', tc: '#166534' },
    { range: '–æ—Ç +10 –¥–æ +30', label: '–£–º–µ—Ä–µ–Ω–Ω—ã–π —Ä–æ—Å—Ç', bg: '#d1fae5', tc: '#065f46' },
    { range: '–æ—Ç ‚àí10 –¥–æ +10', label: '–†–∞–≤–Ω–æ–≤–µ—Å–∏–µ', bg: '#fef3c7', tc: '#92400e' },
    { range: '–æ—Ç ‚àí30 –¥–æ ‚àí10', label: '–£–º–µ—Ä–µ–Ω–Ω–æ–µ —Å–Ω–∏–∂–µ–Ω–∏–µ', bg: '#ffedd5', tc: '#9a3412' },
    { range: '–æ—Ç ‚àí100 –¥–æ ‚àí30', label: '–†—ã–Ω–æ–∫ –∞—Ä–µ–Ω–¥–∞—Ç–æ—Ä–∞', bg: '#fee2e2', tc: '#991b1b' },
  ];
  zones.forEach(z => {
    const active = (z.range.includes('+30 –¥–æ +100') && idaRounded > 30) ||
                   (z.range.includes('+10 –¥–æ +30') && idaRounded > 10 && idaRounded <= 30) ||
                   (z.range.includes('‚àí10 –¥–æ +10') && idaRounded >= -10 && idaRounded <= 10) ||
                   (z.range.includes('‚àí30 –¥–æ ‚àí10') && idaRounded < -10 && idaRounded >= -30) ||
                   (z.range.includes('‚àí100 –¥–æ ‚àí30') && idaRounded < -30);
    html += `<div style="background:${z.bg};border-radius:10px;padding:10px 8px;text-align:center;${active ? 'outline:2px solid ' + z.tc + ';' : 'opacity:0.5'}">
      <div style="font-size:9px;color:${z.tc};font-weight:700;margin-bottom:4px">${z.range}</div>
      <div style="font-size:11px;color:${z.tc};font-weight:800;line-height:1.3">${z.label}</div>
    </div>`;
  });

  html += `</div></div>`;

  // Action buttons
  const isConfigured = SCRIPT_URL !== 'YOUR_GOOGLE_APPS_SCRIPT_URL_HERE';
  html += `
    <div style="display:flex;gap:12px;flex-wrap:wrap;align-items:center">
      <button class="btn btn-success" id="submitBtn" onclick="submitToSheets()">
        <span id="submitBtnText">‚úì –û—Ç–ø—Ä–∞–≤–∏—Ç—å –≤ Google Sheets</span>
      </button>
      <button class="btn btn-ghost" onclick="restartSurvey()">‚Ü∫ –ü—Ä–æ–π—Ç–∏ –∑–∞–Ω–æ–≤–æ</button>
      <button class="btn btn-ghost" onclick="switchToOtherPanel()">
        ${isTeal ? 'üèó –ë–ª–æ–∫ I (–î–µ–≤–µ–ª–æ–ø–µ—Ä)' : 'üì¶ –ë–ª–æ–∫ II (–ê—Ä–µ–Ω–¥–∞—Ç–æ—Ä)'}
      </button>
      ${!isConfigured ? '<button class="btn" style="background:#f59e0b;color:white;font-family:Manrope,sans-serif;font-weight:700;font-size:13px;padding:11px 22px;border-radius:10px;border:none;cursor:pointer" onclick="showSetupModal()">‚öôÔ∏è –ö–∞–∫ –ø–æ–¥–∫–ª—é—á–∏—Ç—å Sheets</button>' : ''}
    </div>
    ${!isConfigured ? '<div style="margin-top:12px;padding:12px 16px;background:#fffbeb;border:1px solid #f59e0b;border-radius:10px;font-size:12px;color:#92400e"><b>‚ö†Ô∏è Google Sheets –µ—â—ë –Ω–µ –ø–æ–¥–∫–ª—é—á—ë–Ω.</b> –ù–∞–∂–º–∏—Ç–µ ¬´–ö–∞–∫ –ø–æ–¥–∫–ª—é—á–∏—Ç—å Sheets¬ª ‚Äî –ø–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –∑–∞–π–º—ë—Ç 5 –º–∏–Ω—É—Ç.</div>' : ''}
  `;

  document.getElementById('resultsArea').innerHTML = html;
}

function restartSurvey() {
  state.answers = {};
  state.scaleVal = null;
  state.openText = '';
  state.currentSection = 0;
  renderAll();
  window.scrollTo({ top: 0, behavior: 'smooth' });
}

function switchToOtherPanel() {
  const other = state.panel === 'dev' ? 'ten' : 'dev';
  state.panel = other;
  state.answers = {};
  state.scaleVal = null;
  state.openText = '';
  state.currentSection = 0;
  renderAll();
  window.scrollTo({ top: 0, behavior: 'smooth' });
}

// ‚îÄ‚îÄ Submit to Google Sheets ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
function submitToSheets() {
  const isConfigured = SCRIPT_URL !== 'YOUR_GOOGLE_APPS_SCRIPT_URL_HERE';

  if (!isConfigured) {
    showSetupModal();
    return;
  }

  const btn = document.getElementById('submitBtn');
  const btnText = document.getElementById('submitBtnText');
  if (!btn) return;

  btn.disabled = true;
  btnText.textContent = '‚è≥ –û—Ç–ø—Ä–∞–≤–∫–∞...';

  // Collect all data
  const block = BLOCKS[state.panel];
  const weights = [0.20, 0.25, 0.15, 0.10, 0.30];
  const sectionScores = block.sections.map(sec =>
    sec.questions.map(q => {
      const ans = state.answers[q.id];
      if (ans === undefined) return 0;
      if (ans === 0) return 1; if (ans === 2) return -1; return 0;
    }).reduce((a,b)=>a+b,0) / sec.questions.length * 100
  );
  const ida = Math.round(sectionScores.reduce((s,v,i)=>s+v*weights[i],0)*10)/10;

  const payload = {
    timestamp: new Date().toISOString(),
    quarter: 'III –∫–≤. 2025',
    panel: state.panel === 'dev' ? '–î–µ–≤–µ–ª–æ–ø–µ—Ä/–°–æ–±—Å—Ç–≤–µ–Ω–Ω–∏–∫' : '–ê—Ä–µ–Ω–¥–∞—Ç–æ—Ä',
    segment: state.segment || '‚Äî',
    ida_total: ida,
    scale_balance: state.scaleVal || '‚Äî',
    open_text: state.openText || '',
  };

  // Section scores
  block.sections.forEach((sec, i) => {
    payload['ida_' + (i+1) + '_' + sec.id] = Math.round(sectionScores[i]*10)/10;
  });

  // Individual answers
  Object.entries(state.answers).forEach(([qid, val]) => {
    let sec, q;
    for (const s of block.sections) {
      const found = s.questions.find(qq => qq.id === qid);
      if (found) { sec = s; q = found; break; }
    }
    if (q) payload['ans_' + qid] = q.opts[val];
  });

  // Send via fetch (no-cors for Apps Script)
  const formData = new FormData();
  Object.entries(payload).forEach(([k,v]) => formData.append(k, v));

  fetch(SCRIPT_URL, { method: 'POST', body: formData, mode: 'no-cors' })
    .then(() => showSuccessScreen(ida))
    .catch(() => {
      btn.disabled = false;
      btnText.textContent = '‚úì –û—Ç–ø—Ä–∞–≤–∏—Ç—å –≤ Google Sheets';
      showToast('‚ùå –û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ URL —Å–∫—Ä–∏–ø—Ç–∞.');
    });
}

function showSuccessScreen(ida) {
  const resultsArea = document.getElementById('resultsArea');
  const zone = ida > 10 ? '–†—ã–Ω–æ–∫ –∞—Ä–µ–Ω–¥–æ–¥–∞—Ç–µ–ª—è üìà' : ida < -10 ? '–†—ã–Ω–æ–∫ –∞—Ä–µ–Ω–¥–∞—Ç–æ—Ä–∞ üìâ' : '–†–∞–≤–Ω–æ–≤–µ—Å–∏–µ ‚öñÔ∏è';
  resultsArea.innerHTML = `
    <div style="text-align:center;padding:60px 40px;background:white;border-radius:20px;border:1px solid var(--border)">
      <div style="font-size:64px;margin-bottom:20px">‚úÖ</div>
      <h2 style="font-family:Spectral,serif;font-size:28px;color:var(--navy);margin-bottom:10px">–û—Ç–≤–µ—Ç—ã –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã!</h2>
      <p style="color:var(--muted);font-size:14px;line-height:1.6;max-width:440px;margin:0 auto 28px">
        –í–∞—à–∏ –¥–∞–Ω–Ω—ã–µ –∑–∞–ø–∏—Å–∞–Ω—ã –≤ Google –¢–∞–±–ª–∏—Ü—É –∏ –±—É–¥—É—Ç –≤–∫–ª—é—á–µ–Ω—ã –≤ —Ä–∞—Å—á—ë—Ç –∫–≤–∞—Ä—Ç–∞–ª—å–Ω–æ–≥–æ –ò–î–ê.
      </p>
      <div style="display:inline-flex;flex-direction:column;align-items:center;background:var(--light);border-radius:16px;padding:20px 40px;margin-bottom:28px">
        <div style="font-size:48px;font-weight:800;color:var(--navy)">${ida > 0 ? '+' : ''}${ida}</div>
        <div style="font-size:12px;color:var(--muted);text-transform:uppercase;letter-spacing:0.08em">–í–∞—à –ò–î–ê ¬∑ ${zone}</div>
      </div>
      <br>
      <div style="display:flex;gap:12px;justify-content:center;flex-wrap:wrap">
        <button class="btn btn-primary" onclick="restartSurvey()">‚Ü∫ –ó–∞–ø–æ–ª–Ω–∏—Ç—å –µ—â—ë —Ä–∞–∑</button>
        <button class="btn btn-ghost" onclick="switchToOtherPanel()">–ó–∞–ø–æ–ª–Ω–∏—Ç—å –¥—Ä—É–≥–æ–π –±–ª–æ–∫</button>
      </div>
    </div>`;
}

// ‚îÄ‚îÄ Setup modal ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
function showSetupModal() {
  document.getElementById('setupModal').style.display = 'flex';
}
function closeSetupModal() {
  document.getElementById('setupModal').style.display = 'none';
}
document.addEventListener('keydown', e => { if(e.key==='Escape') closeSetupModal(); });

// ‚îÄ‚îÄ Toast ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
function showToast(msg) {
  const t = document.getElementById('toast');
  t.textContent = msg;
  t.classList.add('show');
  setTimeout(() => t.classList.remove('show'), 3000);
}
</script>

<!-- ‚îÄ‚îÄ Setup Modal ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
<div id="setupModal" style="display:none;position:fixed;inset:0;background:rgba(10,20,50,0.7);z-index:9999;align-items:center;justify-content:center;padding:20px" onclick="if(event.target===this)closeSetupModal()">
  <div style="background:white;border-radius:20px;max-width:680px;width:100%;max-height:90vh;overflow-y:auto;box-shadow:0 24px 60px rgba(0,0,0,0.25)">

    <!-- Modal header -->
    <div style="background:linear-gradient(135deg,#1a2f5e,#2451a3);padding:28px 32px;border-radius:20px 20px 0 0;position:relative">
      <button onclick="closeSetupModal()" style="position:absolute;top:16px;right:16px;background:rgba(255,255,255,0.15);border:none;color:white;width:32px;height:32px;border-radius:50%;cursor:pointer;font-size:16px;display:flex;align-items:center;justify-content:center">‚úï</button>
      <div style="font-size:13px;color:rgba(255,255,255,0.6);margin-bottom:6px;text-transform:uppercase;letter-spacing:0.08em;font-weight:700">–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—é</div>
      <div style="font-family:Spectral,serif;font-size:22px;color:white;font-weight:600">Google Sheets + GitHub Pages</div>
      <div style="font-size:13px;color:rgba(255,255,255,0.6);margin-top:6px">5 —à–∞–≥–æ–≤ ¬∑ ~10 –º–∏–Ω—É—Ç ¬∑ –±–µ—Å–ø–ª–∞—Ç–Ω–æ</div>
    </div>

    <div style="padding:28px 32px">

      <!-- Step indicator -->
      <div style="display:flex;gap:0;margin-bottom:28px;border-radius:10px;overflow:hidden;border:1px solid #e2e8f0">
        ${['1. Sheets','2. Script','3. URL','4. GitHub','5. –ì–æ—Ç–æ–≤–æ'].map((s,i)=>`
        <div style="flex:1;padding:8px 4px;background:${i===0?'#1a2f5e':'#f8fafc'};color:${i===0?'white':'#94a3b8'};text-align:center;font-size:10px;font-weight:700;border-right:1px solid #e2e8f0">${s}</div>`).join('')}
      </div>

      <!-- Steps -->
      ${[
        {
          n:'1', icon:'üìä', title:'–°–æ–∑–¥–∞–π—Ç–µ Google –¢–∞–±–ª–∏—Ü—É',
          body:`–û—Ç–∫—Ä–æ–π—Ç–µ <a href="https://sheets.new" target="_blank" style="color:#2451a3;font-weight:600">sheets.new</a> ‚Äî —Å–æ–∑–¥–∞—Å—Ç—Å—è –Ω–æ–≤–∞—è —Ç–∞–±–ª–∏—Ü–∞.<br>
          –ù–∞–∑–≤–∞–Ω–∏–µ –Ω–µ –≤–∞–∂–Ω–æ, –Ω–∞–ø—Ä–∏–º–µ—Ä <b>¬´–ò–î–ê –û–ø—Ä–æ—Å—ã 2025¬ª</b>.<br>
          –¢–∞–±–ª–∏—Ü–∞ –±—É–¥–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø–æ–ª–Ω—è—Ç—å—Å—è –ø—Ä–∏ –∫–∞–∂–¥–æ–º –æ—Ç–≤–µ—Ç–µ.`
        },
        {
          n:'2', icon:'‚öôÔ∏è', title:'–°–æ–∑–¥–∞–π—Ç–µ Apps Script',
          body:`–í —Ç–∞–±–ª–∏—Ü–µ –æ—Ç–∫—Ä–æ–π—Ç–µ <b>–†–∞—Å—à–∏—Ä–µ–Ω–∏—è ‚Üí Apps Script</b>.<br>
          –£–¥–∞–ª–∏—Ç–µ –≤–µ—Å—å –∫–æ–¥ –∏ –≤—Å—Ç–∞–≤—å—Ç–µ —ç—Ç–æ—Ç:
          <div style="background:#1e293b;border-radius:10px;padding:16px;margin:10px 0;font-family:monospace;font-size:11px;color:#e2e8f0;line-height:1.6;overflow-x:auto">
function doPost(e) {<br>
&nbsp;&nbsp;const sheet = SpreadsheetApp.getActiveSheet();<br>
&nbsp;&nbsp;const data = e.parameter;<br>
&nbsp;&nbsp;const keys = Object.keys(data);<br>
&nbsp;&nbsp;if (sheet.getLastRow() === 0) {<br>
&nbsp;&nbsp;&nbsp;&nbsp;sheet.appendRow(keys);<br>
&nbsp;&nbsp;}<br>
&nbsp;&nbsp;sheet.appendRow(keys.map(k => data[k]));<br>
&nbsp;&nbsp;return ContentService<br>
&nbsp;&nbsp;&nbsp;&nbsp;.createTextOutput(JSON.stringify({status:'ok'}))<br>
&nbsp;&nbsp;&nbsp;&nbsp;.setMimeType(ContentService.MimeType.JSON);<br>
}<br>
function doGet(e) { return doPost(e); }
          </div>
          –ù–∞–∂–º–∏—Ç–µ <b>üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å</b> (Ctrl+S).`
        },
        {
          n:'3', icon:'üîó', title:'–û–ø—É–±–ª–∏–∫—É–π—Ç–µ –∏ –ø–æ–ª—É—á–∏—Ç–µ URL',
          body:`–ù–∞–∂–º–∏—Ç–µ <b>–†–∞–∑–≤–µ—Ä–Ω—É—Ç—å ‚Üí –ù–æ–≤–æ–µ —Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏–µ</b>.<br>
          –¢–∏–ø: <b>–í–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ</b>.<br>
          –í—ã–ø–æ–ª–Ω—è—Ç—å –æ—Ç –∏–º–µ–Ω–∏: <b>–Ø</b>.<br>
          –î–æ—Å—Ç—É–ø: <b>–í—Å–µ</b> (–∞–Ω–æ–Ω–∏–º–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏).<br>
          –ù–∞–∂–º–∏—Ç–µ <b>–†–∞–∑–≤–µ—Ä–Ω—É—Ç—å</b> ‚Üí —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ URL –≤–∏–¥–∞:<br>
          <div style="background:#f1f5f9;border-radius:8px;padding:10px 12px;margin:8px 0;font-family:monospace;font-size:11px;color:#475569;word-break:break-all">
          https://script.google.com/macros/s/<b>–í–ê–®–ò_–°–ò–ú–í–û–õ–´</b>/exec
          </div>
          –í—Å—Ç–∞–≤—å—Ç–µ —ç—Ç–æ—Ç URL –≤ HTML-—Ñ–∞–π–ª ‚Äî —Å—Ç—Ä–æ–∫–∞ 1 –≤ –±–ª–æ–∫–µ <b>CONFIG</b>:<br>
          <div style="background:#f1f5f9;border-radius:8px;padding:10px 12px;margin:8px 0;font-family:monospace;font-size:11px;color:#1e40af">
          const SCRIPT_URL = '<b>–≤—Å—Ç–∞–≤—å—Ç–µ URL —Å—é–¥–∞</b>';
          </div>`
        },
        {
          n:'4', icon:'üêô', title:'–†–∞–∑–º–µ—Å—Ç–∏—Ç–µ –Ω–∞ GitHub Pages',
          body:`1. –ó–∞–π–¥–∏—Ç–µ –Ω–∞ <a href="https://github.com" target="_blank" style="color:#2451a3;font-weight:600">github.com</a> ‚Üí —Å–æ–∑–¥–∞–π—Ç–µ –±–µ—Å–ø–ª–∞—Ç–Ω—ã–π –∞–∫–∫–∞—É–Ω—Ç.<br>
          2. –ù–∞–∂–º–∏—Ç–µ <b>New repository</b>, –Ω–∞–∑–æ–≤–∏—Ç–µ <b>ida-survey</b>, –≤—ã–±–µ—Ä–∏—Ç–µ Public.<br>
          3. –ó–∞–≥—Ä—É–∑–∏—Ç–µ HTML-—Ñ–∞–π–ª (—Å —É–∂–µ –≤—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã–º URL –∏–∑ —à–∞–≥–∞ 3), –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–≤ –≤ <b>index.html</b>.<br>
          4. –í —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ –æ—Ç–∫—Ä–æ–π—Ç–µ <b>Settings ‚Üí Pages ‚Üí Source: main branch / root</b>.<br>
          5. –ß–µ—Ä–µ–∑ 1‚Äì2 –º–∏–Ω—É—Ç—ã —Å–∞–π—Ç –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É:<br>
          <div style="background:#f1f5f9;border-radius:8px;padding:10px 12px;margin:8px 0;font-family:monospace;font-size:12px;color:#1e40af">
          https://<b>–≤–∞—à_–ª–æ–≥–∏–Ω</b>.github.io/ida-survey
          </div>`
        },
        {
          n:'5', icon:'‚úÖ', title:'–ì–æ—Ç–æ–≤–æ ‚Äî –æ—Ç–ø—Ä–∞–≤—å—Ç–µ —Å—Å—ã–ª–∫—É —Ä–µ—Å–ø–æ–Ω–¥–µ–Ω—Ç–∞–º',
          body:`–û–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–Ω–∞—è —Å—Å—ã–ª–∫–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –ª—é–±–æ–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ.<br>
          –ö–∞–∂–¥—ã–π –æ—Ç–≤–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–ª—è–µ—Ç –Ω–æ–≤—É—é —Å—Ç—Ä–æ–∫—É –≤ Google –¢–∞–±–ª–∏—Ü—É.<br><br>
          <b>–ß—Ç–æ –ø–æ–ø–∞–¥–∞–µ—Ç –≤ —Ç–∞–±–ª–∏—Ü—É:</b> –¥–∞—Ç–∞/–≤—Ä–µ–º—è, —Ç–∏–ø –ø–∞–Ω–µ–ª–∏, –æ—Ç—Ä–∞—Å–ª–µ–≤–æ–π —Å–µ–≥–º–µ–Ω—Ç, –æ—Ç–≤–µ—Ç—ã –Ω–∞ –≤—Å–µ –≤–æ–ø—Ä–æ—Å—ã, —Å–≤–æ–¥–Ω—ã–π –ò–î–ê, –æ—Ü–µ–Ω–∫–∞ –±–∞–ª–∞–Ω—Å–∞ —Ä—ã–Ω–∫–∞, –æ—Ç–∫—Ä—ã—Ç—ã–π –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π.<br><br>
          <div style="background:#dcfce7;border-radius:10px;padding:12px 14px;font-size:12px;color:#166534">
          üí° –î–ª—è –∞–Ω–∞–ª–∏–∑–∞ –¥–∞–Ω–Ω—ã—Ö –º–æ–∂–Ω–æ —Å—Ä–∞–∑—É —Å—Ç—Ä–æ–∏—Ç—å —Å–≤–æ–¥–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã –∏ –¥–∏–∞–≥—Ä–∞–º–º—ã –ø—Ä—è–º–æ –≤ Google Sheets –∏–ª–∏ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –≤ Excel.
          </div>`
        }
      ].map(step => `
        <div style="display:flex;gap:16px;margin-bottom:22px;padding-bottom:22px;border-bottom:1px solid #f1f5f9">
          <div style="width:36px;height:36px;background:#1a2f5e;border-radius:10px;display:flex;align-items:center;justify-content:center;font-size:18px;flex-shrink:0">${step.icon}</div>
          <div style="flex:1">
            <div style="font-size:14px;font-weight:800;color:#1a2f5e;margin-bottom:6px">–®–∞–≥ ${step.n}. ${step.title}</div>
            <div style="font-size:13px;color:#475569;line-height:1.7">${step.body}</div>
          </div>
        </div>`).join('')}

      <button onclick="closeSetupModal()" class="btn btn-primary" style="width:100%;justify-content:center;padding:14px">–ü–æ–Ω—è—Ç–Ω–æ, –∑–∞–∫—Ä—ã—Ç—å</button>
    </div>
  </div>
</div>

</body>
</html>
